springboot-backend/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/
â”‚       â”‚   â””â”€â”€ com/
â”‚       â”‚       â””â”€â”€ grievance/
â”‚       â”‚           â”œâ”€â”€ SpringBootBackendApplication.java
â”‚       â”‚           â”œâ”€â”€ config/
â”‚       â”‚           â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚       â”‚           â”‚   â””â”€â”€ WebConfig.java
â”‚       â”‚           â”œâ”€â”€ controller/
â”‚       â”‚           â”‚   â”œâ”€â”€ AuthController.java
â”‚       â”‚           â”‚   â””â”€â”€ ComplaintController.java
â”‚       â”‚           â”œâ”€â”€ dto/
â”‚       â”‚           â”‚   â”œâ”€â”€ LoginRequest.java
â”‚       â”‚           â”‚   â”œâ”€â”€ RegisterRequest.java
â”‚       â”‚           â”‚   â””â”€â”€ ComplaintDTO.java
â”‚       â”‚           â”œâ”€â”€ model/
â”‚       â”‚           â”‚   â”œâ”€â”€ User.java
â”‚       â”‚           â”‚   â””â”€â”€ Complaint.java
â”‚       â”‚           â”œâ”€â”€ repository/
â”‚       â”‚           â”‚   â”œâ”€â”€ UserRepository.java
â”‚       â”‚           â”‚   â””â”€â”€ ComplaintRepository.java
â”‚       â”‚           â”œâ”€â”€ service/
â”‚       â”‚           â”‚   â”œâ”€â”€ UserService.java
â”‚       â”‚           â”‚   â”œâ”€â”€ ComplaintService.java
â”‚       â”‚           â”‚   â”œâ”€â”€ JwtService.java
â”‚       â”‚           â”‚   â””â”€â”€ AuthService.java
â”‚       â”‚           â””â”€â”€ security/
â”‚       â”‚               â””â”€â”€ JwtAuthenticationFilter.java
â”‚       â””â”€â”€ resources/
â”‚           â”œâ”€â”€ application.properties
â”‚           â””â”€â”€ application.yml
â”œâ”€â”€ pom.xml
â””â”€â”€ README.md     this is the previous sructure now give the correct structure


File name: pom.xml                               <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.7.0</version>
    </parent>
    
    <groupId>com.grievance</groupId>
    <artifactId>it-grievance-system</artifactId>
    <version>1.0.0</version>
    <name>IT Grievance System</name>
    
    <properties>
        <java.version>11</java.version>
    </properties>
    
    <dependencies>
        <!-- Spring Boot Starters -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
        
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>
        
        <!-- MySQL Database -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <scope>runtime</scope>
        </dependency>
        
        <!-- JWT for Authentication -->
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-api</artifactId>
            <version>0.11.5</version>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-impl</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-jackson</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        
        <!-- Validation -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>
    </dependencies>
    
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <configuration>
                    <excludes>
                        <exclude>
                            <groupId>org.projectlombok</groupId>
                            <artifactId>lombok</artifactId>
                        </exclude>
                    </excludes>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>                                                                                                                      filename:application.properties             # Server Configuration
server.port=8080
server.servlet.context-path=/api

# MySQL Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/grievance_db?useSSL=false&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=subi# Enter your MySQL password here

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true

# JWT Configuration
jwt.secret=mySecretKeyForJWTTokenGenerationInGrievanceSystem2024
jwt.expiration=86400000  # 24 hours in milliseconds

# CORS Configuration
cors.allowed-origins=http://localhost:3000                                                                                                                                                                                      filename:MainApplication.java                package com.grievance;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class MainApplication {
    
    public static void main(String[] args) {
        SpringApplication.run(MainApplication.class, args);
        System.out.println("\n" + "=".repeat(60));
        System.out.println("âœ… IT GRIEVANCE SYSTEM BACKEND STARTED!");
        System.out.println("=".repeat(60));
        System.out.println("ğŸŒ Server URL: http://localhost:8080");
        System.out.println("ğŸ”— API Base: http://localhost:8080/api");
        System.out.println("ğŸ”‘ Test Credentials:");
        System.out.println("   Admin: username=admin, password=admin123");
        System.out.println("   User:  username=user, password=user123");
        System.out.println("ğŸ› ï¸  Test Endpoints:");
        System.out.println("   GET  http://localhost:8080/api/auth/test");
        System.out.println("   POST http://localhost:8080/api/auth/login");
        System.out.println("   POST http://localhost:8080/api/auth/register");
        System.out.println("   POST http://localhost:8080/api/complaints");
        System.out.println("=".repeat(60) + "\n");
    }
}                                                                                                                                      filename:AuthController.java                                        package com.grievance.controller;

import com.grievance.dto.AuthResponse;
import com.grievance.dto.LoginRequest;
import com.grievance.dto.RegisterRequest;
import com.grievance.service.JwtService;
import com.grievance.service.UserService;
import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.security.authentication.AuthenticationManager;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.web.bind.annotation.*;

import javax.validation.Valid;
import java.util.HashMap;
import java.util.Map;

@RestController
@RequestMapping("/api/auth")
@RequiredArgsConstructor
@CrossOrigin(origins = "http://localhost:3000")
public class AuthController {
    
    private final AuthenticationManager authenticationManager;
    private final JwtService jwtService;
    private final UserService userService;
    
    @PostMapping("/login")
    public ResponseEntity<?> login(@Valid @RequestBody LoginRequest request) {
        try {
            Authentication authentication = authenticationManager.authenticate(
                new UsernamePasswordAuthenticationToken(
                    request.getUsername(),
                    request.getPassword()
                )
            );
            
            UserDetails userDetails = (UserDetails) authentication.getPrincipal();
            String token = jwtService.generateToken(userDetails);
            
            AuthResponse response = new AuthResponse();
            response.setToken(token);
            response.setUsername(request.getUsername());
            response.setRole(userDetails.getAuthorities().iterator().next().getAuthority().replace("ROLE_", ""));
            response.setMessage("Login successful");
            response.setSuccess(true);
            
            return ResponseEntity.ok(response);
        } catch (Exception e) {
            return ResponseEntity.status(401)
                .body(Map.of("success", false, "message", "Invalid credentials"));
        }
    }
    
    @PostMapping("/register")
    public ResponseEntity<?> register(@Valid @RequestBody RegisterRequest request) {
        try {
            var user = userService.registerUser(request);
            
            AuthResponse response = new AuthResponse();
            response.setUsername(user.getUsername());
            response.setRole(user.getRole().name());
            response.setMessage("Registration successful");
            response.setSuccess(true);
            
            return ResponseEntity.ok(response);
        } catch (Exception e) {
            return ResponseEntity.badRequest()
                .body(Map.of("success", false, "message", e.getMessage()));
        }
    }
    
    @GetMapping("/test")
    public ResponseEntity<?> test() {
        return ResponseEntity.ok(Map.of(
            "status", "success",
            "message", "Backend is running on port 8080",
            "timestamp", System.currentTimeMillis()
        ));
    }
}                                                                                                                                                       filename:    Complaint.java           package com.grievance.model;

import javax.persistence.*;
import java.util.Date;

@Entity
@Table(name = "complaints")
public class Complaint {
    
    public enum Status {
        OPEN,
        IN_PROGRESS,
        RESOLVED,
        CLOSED,
        REJECTED
    }
    
    public enum Priority {
        LOW,
        MEDIUM,
        HIGH,
        URGENT
    }
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false, length = 200)
    private String title;
    
    @Column(columnDefinition = "TEXT", nullable = false)
    private String description;
    
    @Column(nullable = false, length = 50)
    private String category;
    
    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private Status status = Status.OPEN;
    
    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private Priority priority = Priority.MEDIUM;
    
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id", nullable = false)
    private User user;
    
    @Column(name = "assigned_to")
    private String assignedTo;
    
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "created_at", nullable = false)
    private Date createdAt = new Date();
    
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "updated_at", nullable = false)
    private Date updatedAt = new Date();
    
    // Getters and Setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    public String getTitle() { return title; }
    public void setTitle(String title) { this.title = title; }
    
    public String getDescription() { return description; }
    public void setDescription(String description) { this.description = description; }
    
    public String getCategory() { return category; }
    public void setCategory(String category) { this.category = category; }
    
    public Status getStatus() { return status; }
    public void setStatus(Status status) { this.status = status; }
    
    public Priority getPriority() { return priority; }
    public void setPriority(Priority priority) { this.priority = priority; }
    
    public User getUser() { return user; }
    public void setUser(User user) { this.user = user; }
    
    public String getAssignedTo() { return assignedTo; }
    public void setAssignedTo(String assignedTo) { this.assignedTo = assignedTo; }
    
    public Date getCreatedAt() { return createdAt; }
    public void setCreatedAt(Date createdAt) { this.createdAt = createdAt; }
    
    public Date getUpdatedAt() { return updatedAt; }
    public void setUpdatedAt(Date updatedAt) { this.updatedAt = updatedAt; }
}                                                                                                                                                               filename:   User.java                package com.grievance.model;

import javax.persistence.*;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "users")
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(unique = true, nullable = false)
    private String username;
    
    @Column(unique = true, nullable = false)
    private String email;
    
    @Column(nullable = false)
    private String password;
    
    @Enumerated(EnumType.STRING)
    private Role role;
    
    @OneToMany(mappedBy = "user", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    private List<Complaint> complaints = new ArrayList<>();
    
    // Getters and Setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }
    
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
    
    public String getPassword() { return password; }
    public void setPassword(String password) { this.password = password; }
    
    public Role getRole() { return role; }
    public void setRole(Role role) { this.role = role; }
    
    public List<Complaint> getComplaints() { return complaints; }
    public void setComplaints(List<Complaint> complaints) { this.complaints = complaints; }
}                                                                               filenmae:  ComplaintService.java                                                         package com.grievance.service;

import com.grievance.dto.ComplaintDTO;
import com.grievance.model.Complaint;
import com.grievance.model.User;
import com.grievance.repository.ComplaintRepository;
import com.grievance.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.stream.Collectors;

@Service
@RequiredArgsConstructor
public class ComplaintService {
    
    private final ComplaintRepository complaintRepository;
    private final UserRepository userRepository;
    
    public ComplaintDTO createComplaint(ComplaintDTO complaintDTO, String username) {
        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> new RuntimeException("User not found"));
        
        Complaint complaint = new Complaint();
        complaint.setTitle(complaintDTO.getTitle());
        complaint.setDescription(complaintDTO.getDescription());
        complaint.setCategory(complaintDTO.getCategory());
        complaint.setStatus(Complaint.Status.OPEN);
        complaint.setPriority(Complaint.Priority.valueOf(complaintDTO.getPriority()));
        complaint.setUser(user);
        
        Complaint savedComplaint = complaintRepository.save(complaint);
        return ComplaintDTO.fromEntity(savedComplaint);
    }
    
    public List<ComplaintDTO> getAllComplaints() {
        return complaintRepository.findAll()
                .stream()
                .map(ComplaintDTO::fromEntity)
                .collect(Collectors.toList());
    }
    
    public List<ComplaintDTO> getUserComplaints(String username) {
        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> new RuntimeException("User not found"));
        
        return complaintRepository.findByUserId(user.getId())
                .stream()
                .map(ComplaintDTO::fromEntity)
                .collect(Collectors.toList());
    }
    
    public ComplaintDTO updateComplaintStatus(Long complaintId, String status, String assignedTo) {
        Complaint complaint = complaintRepository.findById(complaintId)
                .orElseThrow(() -> new RuntimeException("Complaint not found"));
        
        complaint.setStatus(Complaint.Status.valueOf(status));
        if (assignedTo != null) {
            complaint.setAssignedTo(assignedTo);
        }
        complaint.setUpdatedAt(new java.util.Date());
        
        Complaint updatedComplaint = complaintRepository.save(complaint);
        return ComplaintDTO.fromEntity(updatedComplaint);
    }
    
    public void deleteComplaint(Long complaintId) {
        complaintRepository.deleteById(complaintId);
    }
}                                                                                                                                       filename:UserService.java           package com.grievance.service;

import com.grievance.dto.RegisterRequest;
import com.grievance.model.Role;
import com.grievance.model.User;
import com.grievance.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

import java.util.Collections;

@Service
@RequiredArgsConstructor
public class UserService implements UserDetailsService {
    
    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;
    
    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> new UsernameNotFoundException("User not found"));
        
        return new org.springframework.security.core.userdetails.User(
                user.getUsername(),
                user.getPassword(),
                Collections.singletonList(() -> "ROLE_" + user.getRole().name())
        );
    }
    
    public User registerUser(RegisterRequest request) {
        if (userRepository.existsByUsername(request.getUsername())) {
            throw new RuntimeException("Username already exists");
        }
        
        if (userRepository.existsByEmail(request.getEmail())) {
            throw new RuntimeException("Email already exists");
        }
        
        User user = new User();
        user.setUsername(request.getUsername());
        user.setEmail(request.getEmail());
        user.setPassword(passwordEncoder.encode(request.getPassword()));
        user.setRole(Role.USER);
        
        return userRepository.save(user);
    }
}
























"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysql.exe" -u root -psubi -e "USE it_grievance_db; INSERT INTO users (username, password, email, role, name) VALUES ('admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iK6l7JQe8fL8BUbF2g1KQ.kw9wSW', 'admin@example.com', 'ADMIN', 'Admin'); INSERT INTO users (username, password, email, role, name) VALUES ('user', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iK6l7JQe8fL8BUbF2g1KQ.kw9wSW', 'user@example.com', 'USER', 'User');"
package com.org.ResolveIt.service;
import com.org.ResolveIt.model.StatusType;//
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;// connection b/w smtp mail
import org.springframework.stereotype.Service;
@Service
public class EmailService {
@Autowired
    private JavaMailSender mailSender;
public void sendComplaintStatusMail(String toEmail,

                                        String complaintTitle,

                                        StatusType status) {

        SimpleMailMessage message = new SimpleMailMessage();

        message.setTo(toEmail);

        message.setSubject("Complaint Status Updated");

        message.setText(
"Hello,\n\n" +
"The status of your complaint has been updated.\n\n" +
"Complaint: " + complaintTitle + "\n" +
"Current Status: " + status + "\n\n" +
"Regards,\n complainX Support Team"
        );
mailSender.send(message);

    }

}

 
Unknown user left the chat.

 
